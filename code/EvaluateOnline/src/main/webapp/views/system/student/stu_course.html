<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <title>实验课程</title>
    <meta name="keywords" content="">
    <meta name="description" content="">

    <link rel="shortcut icon" href="favicon.ico">
    <link href="../../../static/modules/plugin/bootstrap/bootstrap.min.css?v=3.3.6" rel="stylesheet">
    <link href="../../../static/modules/plugin/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet">
    <link href="../../../static/modules/plugin/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
	<link href="../../../static/modules/plugin/animate/animate.css" rel="stylesheet">
	<link href="../../../static/system/admin/css/style.css?v=4.1.0" rel="stylesheet">
</head>

<body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
        <!-- Panel Other -->
        <div class="ibox float-e-margins">
        	<div class="ibox-title">
                <h5>课程实验完成情况统计</h5>
            </div>
            <div class="ibox-content">
                <div class="row row-lg">
                    <div class="col-sm-12">
                        <!-- Example Events -->
                        <div class="example-wrap">
                            <!--<h4 class="example-title">学生课程</h4>-->
                            <div id="container" style="width: 550px; height: 400px; margin: 0 auto">
                            
                            	
                            </div>
                            
                            
                        </div>
                        <!-- End Example Events -->
                        
                        
                    </div>
                </div>
            </div>
        </div>
        <!-- End Panel Other -->
    </div>
	
    <!-- 全局js -->
	<script src="../../../static/modules/plugin/jquery/jquery.min.js?v=2.1.4"></script>
	<script src="../../../static/modules/plugin/bootstrap/bootstrap.min.js?v=3.3.6"></script>
	<!-- 自定义js -->
	<script src="../../../static/system/admin/js/content.js?v=1.0.0"></script>
	<!-- Bootstrap table -->
	<script src="../../../static/modules/plugin/bootstrap-table/bootstrap-table.min.js"></script>
	<script src="../../../static/modules/plugin/bootstrap-table-js/bootstrap-table.js"></script>
	<script src="../../../static/modules/plugin/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>
    <!-- Peity -->
    <script>
        function actionFormatter(value,row,index) {
            return '<a class="into" href="">点击进入</a>';
        }
        window.actionEvents={
            'click .into':function(e,value,row,index) {
                $(this).attr('href','#');
            }
        }
    </script>
    
   
    <!--  图表 -->
	<script src="../../../static/system/student/js/jquery.min.js"></script>
	<script src="../../../static/system/student/js/highcharts.js"></script>
	<script language="JavaScript">
		
		$(document).ready(function() { 
			var courses = [];
			var sumQuestion = [];
			var successQuestion = [];
	        $.ajax({  
	            url:"/student/course/getTuData",  
	            type:"post",  
	            dataType:"json",   
	        }).done(function(data){
	        	var courseNames = data.courseNames;
	        	var sumQ = data.sums;
	        	var successQ = data.success;
	        	for(var i=0; i< courseNames.length;i++)
        		{
	        		courses.push(courseNames[i]);
        		}
	        	
	        	
	        	for(var i=0; i< sumQ.length;i++)
        		{
	        		sumQuestion.push(sumQ[i]-successQ[i]);
        		}
	        	
	        	for(var i=0; i< successQ.length;i++)
        		{
	        		successQuestion.push(successQ[i]);
        		}
	        	
	         
		   var chart = {
		      type: 'column'
		   };
		   var title = {
		      text: '课程实验完成状况'   
		   };
		   
		   // 课程
			//X 轴   
		   var xAxis = {
		      categories: courses
		   };
		   //Y 轴   
		   var yAxis ={
		      min: 0,
		      title: {
		        text: '实验题数'
		      },
		      stackLabels: {
		        enabled: true,
		        style: {
		           fontWeight: 'bold',
		           color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
		        }
		      }
		   };
		   
		   // 标记
		   var legend = {
		      align: 'right',
		      x: -30,
		      verticalAlign: 'top',
		      y: 25,
		      floating: true,
		      backgroundColor: (Highcharts.theme && Highcharts.theme.background2) || 'white',
		      borderColor: '#CCC',
		      borderWidth: 1,
		      shadow: false
		   };   
		   //悬浮框
		   var tooltip = {
		      formatter: function () {
		         return '<b>' + this.x + '</b><br/>' +
		            this.series.name + ': ' + this.y + '<br/>' +
		            '总题数: ' + this.point.stackTotal;
		      }
		   };
		   var plotOptions = {
		      column: {
		         stacking: 'normal',
		         dataLabels: {
		            enabled: true,
		            color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white',
		            style: {
		               textShadow: '0 0 3px black'
		            }
		         }
		      }
		   };
		   var credits = {
		      enabled: false
		   };
		   
		   
			// 数据
		   var series= [{
		            name: '已完成通过',
		            data: successQuestion
		        }, {
		            name: '未完成通过',
		            data: sumQuestion      
		   }];     
		      
		   var json = {};   
		   json.chart = chart; 
		   json.title = title;   
		   json.xAxis = xAxis;
		   json.yAxis = yAxis;
		   json.legend = legend;
		   json.tooltip = tooltip;
		   json.plotOptions = plotOptions;
		   json.credits = credits;
		   json.series = series;
		   $('#container').highcharts(json);
	        });
		});
		</script>
</body>

</html>